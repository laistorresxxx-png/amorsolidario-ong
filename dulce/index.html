<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ajude o Orfanato da Irmã Dulce</title>

<style>
    * {
        box-sizing: border-box;
    }
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #fff;
        color: #333;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    header {
        padding: 0;
        border-bottom: none;
    }
    header img {
        width: 100%;
        height: auto;
        display: block;
    }
    .container {
        padding: 15px;
        max-width: 480px;
        margin: 0 auto;
    }
    #category {
        text-align: center;
        color: #888;
        font-size: 0.9rem;
        margin-bottom: 5px;
    }
    h1 {
        font-size: 1.4rem;
        margin: 5px 0 10px;
        text-align: center;
        line-height: 1.2;
        color: #0082c0;
    }
    h1 strong {
        font-weight: 700;
    }
    .id {
        text-align: center;
        font-size: 0.9rem;
        color: #666;
        margin-bottom: 15px;
    }
    .main-image {
        width: 100%;
        border-radius: 8px;
        margin-top: 10px;
        display: block;
        object-fit: cover;
    }
    .hearts {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        margin: 15px 0;
    }
    .description {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 30px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .description strong {
        color: #d32f2f;
    }
    .faq-section {
        max-width: 650px;
        margin: 40px auto;
        padding: 0 15px;
    }
    .faq-section h2 {
        font-size: 1.3rem;
        margin-bottom: 15px;
        font-weight: bold;
        color: #0082c0;
    }
    .faq-section details {
        background: #fff;
        border-radius: 12px;
        padding: 15px 20px;
        margin-bottom: 12px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .donate-button {
        display: block;
        text-align: center;
        background: #0082c0;
        color: #fff;
        font-weight: bold;
        padding: 14px;
        border-radius: 8px;
        text-decoration: none;
        max-width: 300px;
        margin: 30px auto;
        font-size: 1.1rem;
        transition: background 0.3s ease;
        cursor: pointer;
    }
    .donate-button:hover {
        background: #00689b;
    }
    /* POPUP */
    .popup-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 999;
    }
    .popup {
        background: #fff;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        padding: 20px;
        position: relative;
        text-align: center;
    }
    .popup img.selo, .popup img.rosary {
        max-height: 100px;
        margin-bottom: 10px;
    }
    .popup h2 {
        font-size: 1.2rem;
        margin: 5px 0;
    }
    .popup p {
        font-size: 0.9rem;
        color: #555;
        line-height: 1.4;
    }
    .popup-box {
        background: #e8f6ec;
        padding: 10px;
        border-radius: 6px;
        margin: 15px 0;
    }
    .popup-box h3 {
        color: #1b7d3d;
        margin-bottom: 5px;
        font-size: 1rem;
    }
    .popup-values {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: center;
        margin: 15px 0;
    }
    .popup-values a {
        background: #0082c0;
        color: #fff;
        padding: 8px 14px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s;
        font-size: 0.95rem;
        cursor: pointer;
    }
    .popup-values a:hover {
        background: #00689b;
    }
    .popup-footer {
        font-size: 0.85rem;
        color: #555;
        margin-top: 10px;
    }
    .close-btn {
        position: absolute;
        top: 10px; right: 10px;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #333;
    }
    /* Comments Section Styling */
    .comments-section {
        max-width: 650px;
        margin: 30px auto;
        padding: 0 15px;
    }
    .comments-section h2 {
        color: #0082c0;
        font-size: 1.3rem;
        margin-bottom: 15px;
    }
    .comment {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        display: flex;
        align-items: flex-start;
        gap: 10px;
    }
    .comment img.avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }
    .comment-content {
        flex: 1;
    }
    .comment-content strong {
        font-weight: bold;
        color: #333;
    }
    .comment-content span {
        color: #888;
        font-size: 0.85rem;
        margin-left: 10px;
    }
    .comment-content p {
        margin-top: 5px;
        color: #333;
        font-size: 0.95rem;
    }
    .comments-section textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        margin-bottom: 10px;
        resize: vertical;
    }
    .comments-section button {
        background: #0082c0;
        color: #fff;
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
    }
    .comments-section button:hover {
        background: #00689b;
    }
    /* New Donation Popup Styling */
    .rosary-popup-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }
    .rosary-popup {
        background: #fff;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        padding: 20px;
        position: relative;
        text-align: center;
    }
    .rosary-popup h2 {
        font-size: 1.2rem;
        color: #0082c0;
        margin: 10px 0;
    }
    .rosary-popup p {
        font-size: 0.9rem;
        color: #333;
        line-height: 1.5;
        margin-bottom: 15px;
    }
    .rosary-popup a.donate-now {
        display: inline-block;
        background: #d32f2f;
        color: #fff;
        padding: 12px 20px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: bold;
        font-size: 1rem;
        transition: background 0.3s ease;
        cursor: pointer;
    }
    .rosary-popup a.donate-now:hover {
        background: #b71c1c;
    }
    /* Footer Styling */
    footer {
        background: #0082c0;
        padding: 30px 15px;
        text-align: center;
        border-top: 1px solid #e0e0e0;
        color: #fff;
    }
    footer .footer-logo img {
        max-width: 150px;
        margin-bottom: 15px;
    }
    footer .footer-nav {
        margin-bottom: 20px;
    }
    footer .footer-nav a {
        color: #fff;
        text-decoration: none;
        margin: 0 10px;
        font-size: 0.95rem;
        transition: color 0.3s ease;
    }
    footer .footer-nav a:hover {
        color: #e0e0e0;
    }
    footer .footer-social {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
    }
    footer .footer-social a img {
        width: 30px;
        height: 30px;
        transition: opacity 0.3s ease;
    }
    footer .footer-social a img:hover {
        opacity: 0.7;
    }
    footer .footer-contact {
        font-size: 0.85rem;
        color: #fff;
        line-height: 1.5;
    }
    footer .footer-contact p {
        margin: 5px 0;
    }
    /* PIX Popup Styles */
    .pix-popup {
        background: #fff;
        border-radius: 10px;
        max-width: 400px;
        width: 90%;
        padding: 20px;
        position: relative;
        text-align: center;
    }
    .pix-code {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        word-break: break-all;
        font-family: monospace;
        font-size: 0.9rem;
        line-height: 1.4;
        max-height: 200px;
        overflow-y: auto;
    }
    .copy-btn {
        background: #0082c0;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
        margin-top: 10px;
    }
    .copy-btn:hover {
        background: #00689b;
    }
    .loading {
        display: none;
        text-align: center;
        padding: 20px;
    }
    .loading-spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #0082c0;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    /* Simulated PIX code for demo */
    .simulated-pix {
        font-family: monospace;
        background: #f0f0f0;
        padding: 10px;
        border-radius: 5px;
        margin: 15px 0;
        word-break: break-all;
    }
</style>
</head>
<body>

<header>
    <img src="10.png" alt="Cabeçalho" />
</header>

<div class="container">
    <p id="category">SOLIDARIEDADE / INFÂNCIA</p>
    <h1>Ajude o <strong>Orfanato da Irmã Dulce</strong></h1>
    <p class="id">ID: 7854321</p>
    
    <div class="hearts">
        <img src="5.png" alt="Corações recebidos e doação protegida" />
    </div>
    
    <!-- BOTÃO "QUERO AJUDAR" -->
    <a href="#" class="donate-button" id="openPopup1">Quero Ajudar</a>
</div>

<div class="description">
    <strong>Essas crianças não podem esperar — cada dia sem ajuda é mais um prato vazio, mais um sonho interrompido.</strong>
    <p style="margin-top:8px; font-size:0.85rem; color:#666;">Campanha criada em: 09/08/2025</p>
    <p style="line-height:1.6; font-size:1rem; color:#333; margin-top:12px;">
        No Orfanato da Irmã Dulce, dezenas de crianças carentes encontram abrigo, alimento e amor. 
        Mas a realidadade é dura: a despensa está ficando vazia, as contas acumulam e os recursos para manter as atividades estão chegando ao fim.  
        Sem sua ajuda, portas podem se fechar, deixando essas crianças sem o lar que as protege.  
        Sua doação é mais do que dinheiro — é alimento, é roupa, é educação, é a chance de um futuro digno.  
        Cada real faz diferença. <strong>Hoje você pode ser a mão que segura, o abraço que conforta, a esperança que reacende.</strong>
    </p>
</div>

<section class="faq-section">
    <h2>Como você pode fazer a diferença</h2>
    <details>
        <summary>Como doar para o Orfanato da Irmã Dulce?</summary>
        <p>Você pode doar via PIX diretamente pela nossa página de campanha.</p>
    </details>
    <details>
        <summary>Para onde vai o dinheiro arrecadado?</summary>
        <p>100% das doações são destinadas à compra de alimentos, materiais escolares, roupas e manutenção do espaço.</p>
    </details>
    <details>
        <summary>Posso ajudar de outras formas?</summary>
        <p>Sim! Além das doações, você pode se voluntariar e ajudar com seu tempo, conhecimento ou recursos.</p>
    </details>
</section>

<!-- Updated Comments Section -->
<section class="comments-section">
    <h2>Comentários</h2>
    <div class="comment">
        <img src="9-150x150.jpg" alt="Avatar Maria" class="avatar">
        <div class="comment-content">
            <strong>Maria Souza</strong> <span>há 2 horas</span>
            <p>Deus abençoe essas crianças! Fiz minha contribuição com muito amor ❤️</p>
        </div>
    </div>
    <div class="comment">
        <img src="11368b3b-5971-483a-88dd-929ad556eacf.webp" alt="Avatar João" class="avatar">
        <div class="comment-content">
            <strong>João Pereira</strong> <span>há 5 horas</span>
            <p>Já doei e compartilhei com meus amigos, vamos juntos!</p>
        </div>
    </div>
    <div class="comment">
        <img src="images%20(1).jpeg" alt="Avatar Ana" class="avatar">
        <div class="comment-content">
            <strong>Ana Clara</strong> <span>há 8 horas</span>
            <p>Que iniciativa linda! Acabei de doar R$50, espero que ajude!</p>
        </div>
    </div>
    <div class="comment">
        <img src="images%20(3).jpeg" alt="Avatar Carlos" class="avatar">
        <div class="comment-content">
            <strong>Carlos Mendes</strong> <span>há 12 horas</span>
            <p>Parabéns pelo trabalho incrível! Doei e vou ajudar a divulgar.</p>
        </div>
    </div>
    <div class="comment">
        <img src="images.jpeg" alt="Avatar Luiza" class="avatar">
        <div class="comment-content">
            <strong>Luiza Ferreira</strong> <span>há 1 dia</span>
            <p>Essa causa toca o coração. Contribuí com R$100 e desejo força para todos!</p>
        </div>
    </div>
    <textarea placeholder="Escreva seu comentário..." style="width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;margin-bottom:10px;"></textarea>
    <button>Enviar Comentário</button>
</section>

<!-- BOTÃO "QUERO AJUDAR" ABAIXO DA VSL -->
<a href="#" class="donate-button" id="openPopup2">Quero Ajudar</a>

<!-- Original Donation Popup -->
<div id="donationPopup" class="popup-overlay">
  <div class="popup">
    <button class="close-btn" id="closePopup">&times;</button>
    <img src="cancao-nova-logo.png" alt="Selo de Segurança" class="selo">
    <h2>Doação segura garantida!</h2>
    <p>Esta vaquinha faz parte da base de campanhas e está protegida pelos nossos processos de segurança.</p>
    <div class="popup-box">
      <h3>Nossa segurança e transparência</h3>
      <p>Segurança e transparência são prioridade. Protegemos seus dados com tecnologia de ponta e protocolos rigorosos. Assumimos responsabilidade por reembolsos quando necessário.</p>
    </div>
    <div class="popup-values">
      <a href="#" data-amount="30">R$ 30</a>
      <a href="#" data-amount="50">R$ 50</a>
      <a href="#" data-amount="70">R$ 70</a>
      <a href="#" data-amount="100">R$ 100</a>
      <a href="#" data-amount="150">R$ 150</a>
      <a href="#" data-amount="200">R$ 200</a>
      <a href="#" data-amount="300">R$ 300</a>
      <a href="#" data-amount="400">R$ 400</a>
      <a href="#" data-amount="500">R$ 500</a>
      <a href="#" data-amount="1000">R$ 1000</a>
    </div>
    <p class="popup-footer">Juntos, podemos transformar vidas 💚</p>
  </div>
</div>

<!-- PIX Popup -->
<div id="pixPopup" class="popup-overlay">
  <div class="pix-popup">
    <button class="close-btn" id="closePixPopup">&times;</button>
    <h2>Faça sua doação via PIX</h2>
    <p>Utilize o código abaixo para realizar o pagamento:</p>
    
    <div class="loading">
        <div class="loading-spinner"></div>
        <p>Gerando código PIX...</p>
    </div>
    
    <div id="pixContent" style="display: none;">
        <div class="pix-code" id="pixCode"></div>
        <button class="copy-btn" id="copyPixButton">Copiar Código PIX</button>
        <p class="popup-footer">Após o pagamento, sua doação será processada automaticamente.</p>
    </div>
  </div>
</div>

<!-- New Rosary Donation Popup -->
<div id="rosaryPopup" class="rosary-popup-overlay">
  <div class="rosary-popup">
    <button class="close-btn" id="closeRosaryPopup">&times;</button>
    <img src="20.png" alt="Terço Abençoado" class="rosary">
    <h2>Faça uma Doação de R$50 e Receba um Terço Abençoado!</h2>
    <p>Sua doação de R$50 ajuda a pagar o aluguel do Orfanato da Irmã Dulce, garantindo um lar seguro para nossas crianças. Como agradecimento, receba um terço abençoado, símbolo de fé e esperança.</p>
    <a href="#" class="donate-now" data-amount="50">Ajude com Amor</a>
  </div>
</div>

<!-- Canção Nova Footer -->
<footer>
    <div class="footer-logo">
        <img src="15.png" alt="Canção Nova Logo">
    </div>
    <div class="footer-nav">
        <a href="#">Início</a>
        <a href="#">Sobre Nós</a>
        <a href="#">Doações</a>
        <a href="#">Eventos</a>
        <a href="#">Contato</a>
    </div>
    <div class="footer-contact">
        <p>Canção Nova - Comunidade Católica</p>
        <p>Praça Santos Dias da Silva, 28

Vila Damasceno
São Paulo - SP, 05864-210</p>
        <p>Email: contato@cancaonova.com | Telefone: 0800 9837-9916</p>
        <p>&copy; 2025 Canção Nova. Todos os direitos reservados.</p>
    </div>
</footer>

<script>
// Variáveis globais
let currentAmount = 0;

// Elementos da interface
const donationPopup = document.getElementById('donationPopup');
const pixPopup = document.getElementById('pixPopup');
const rosaryPopup = document.getElementById('rosaryPopup');
const loadingElement = document.querySelector('.loading');
const pixContent = document.getElementById('pixContent');
const pixCodeElement = document.getElementById('pixCode');
const copyPixButton = document.getElementById('copyPixButton');

// Event Listeners para abrir popups
document.getElementById('openPopup1').addEventListener('click', function(e) {
  e.preventDefault();
  donationPopup.style.display = 'flex';
});
document.getElementById('openPopup2').addEventListener('click', function(e) {
  e.preventDefault();
  donationPopup.style.display = 'flex';
});

// Event Listeners para fechar popups
document.getElementById('closePopup').addEventListener('click', function() {
  donationPopup.style.display = 'none';
});
document.getElementById('closePixPopup').addEventListener('click', function() {
  pixPopup.style.display = 'none';
});
document.getElementById('closeRosaryPopup').addEventListener('click', function() {
  rosaryPopup.style.display = 'none';
});

// Fechar popups clicando fora
donationPopup.addEventListener('click', function(e) {
  if (e.target === this) {
    donationPopup.style.display = 'none';
  }
});
pixPopup.addEventListener('click', function(e) {
  if (e.target === this) {
    pixPopup.style.display = 'none';
  }
});
rosaryPopup.addEventListener('click', function(e) {
  if (e.target === this) {
    rosaryPopup.style.display = 'none';
  }
});

// Event Listeners para botões de doação
document.querySelectorAll('.popup-values a, .donate-now').forEach(button => {
  button.addEventListener('click', function(e) {
    e.preventDefault();
    currentAmount = parseInt(this.getAttribute('data-amount'));
    
    // Fecha o popup atual e abre o popup do PIX
    if (this.closest('.popup-overlay')) {
      this.closest('.popup-overlay').style.display = 'none';
    }
    
    generatePixCode(currentAmount);
  });
});

// Função para gerar código PIX
function generatePixCode(amount) {
  // Mostra o popup do PIX com loading
  pixPopup.style.display = 'flex';
  loadingElement.style.display = 'block';
  pixContent.style.display = 'none';
  
  // Converte o valor para centavos
  const amountInCents = amount * 100;
  
  // Faz a requisição para a API
  fetch('https://pay.nivuspay.com.br/api/v1/transaction.purchase', {
    method: 'POST',
    headers: {
      'accept': 'application/json',
      'Content-Type': 'application/json',
      'Authorization': 'b8e3fcbd-7940-4a34-864f-68b84bd77e7b'
    },
    body: JSON.stringify({
      "name": "Rizia Regia Silva",
      "email": "rizia.regia@example.com",
      "cpf": "01101101105",
      "phone": "16999350383",
      "paymentMethod": "PIX",
      "amount": amountInCents,
      "traceable": true,
      "items": [
        {
          "unitPrice": amountInCents,
          "title": "Doação para o Orfanato da Irmã Dulce",
          "quantity": 1,
          "tangible": false
        }
      ]
    })
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Erro na requisição: ' + response.status);
    }
    return response.json();
  })
  .then(data => {
    // Verifica se a resposta contém o código PIX
    // Nota: A estrutura exata da resposta pode variar dependendo da API
    // Você pode precisar ajustar isso conforme a documentação da NivusPay
    const pixCode = data.pixCode || data.qrCode || data.payload;
    
    if (pixCode) {
      // Exibe o código PIX
      pixCodeElement.textContent = pixCode;
      loadingElement.style.display = 'none';
      pixContent.style.display = 'block';
    } else {
      throw new Error('Código PIX não encontrado na resposta');
    }
  })
  .catch(error => {
    console.error('Erro:', error);
    
    // Para fins de demonstração, vamos usar um código PIX simulado
    // Em produção, remova esta parte e mostre apenas a mensagem de erro
    const simulatedPix = `00020126580014br.gov.bcb.pix0136c4d8325a-8e7a-4d5a-bc4d-8325a8e7a4d50204Doacao${amount}0304Orfanato520400005303986540${amount.toFixed(2)}5802BR5913OrfanatoDulce6008SaoPaulo62290525mpqrinter1234567890123496304`;
    
    pixCodeElement.textContent = simulatedPix;
    loadingElement.style.display = 'none';
    pixContent.style.display = 'block';
    
    // Mensagem de erro real (use em produção)
    // loadingElement.style.display = 'none';
    // pixContent.innerHTML = '<p>Ocorreu um erro ao gerar o código PIX. Por favor, tente novamente.</p>';
    // pixContent.style.display = 'block';
  });
}

// Função para copiar o código PIX
copyPixButton.addEventListener('click', function() {
  const tempTextArea = document.createElement('textarea');
  tempTextArea.value = pixCodeElement.textContent;
  document.body.appendChild(tempTextArea);
  tempTextArea.select();
  document.execCommand('copy');
  document.body.removeChild(tempTextArea);
  
  // Feedback visual
  const originalText = this.textContent;
  this.textContent = 'Código Copiado!';
  this.style.background = '#1b7d3d';
  
  setTimeout(() => {
    this.textContent = originalText;
    this.style.background = '';
  }, 2000);
});

// New Rosary Popup Logic
setTimeout(function() {
  rosaryPopup.style.display = 'flex';
}, 15000); // 15 seconds delay
</script>

</body>
</html>